(()=>{"use strict";class t{constructor(){this.locations=[]}async requestForecast(t){const e=`http://api.weatherapi.com/v1/current.json?key=f9fe0c76012946608ac01409231207&q=${t}`,n=await fetch(e),o=await n.json();return console.log(e),console.log(o),o}async requestLocations(t){const e=await fetch(`https://api.weatherapi.com/v1/search.json?key=f9fe0c76012946608ac01409231207&q=${t}`);return await e.json()}}class e{constructor(){}renderLocations(t){const e=document.getElementById("location-results");this.clearLocations();const n=[];return t.forEach((t=>{n.push(this.createLocationElement(t))})),n.forEach((t=>{e.appendChild(t)})),n}clearLocations(){document.getElementById("location-results").innerHTML=""}createLocationElement(t){const e=document.createElement("div");return e.classList.add("location-result"),e.textContent=t.region?`${t.name}, ${t.region}, ${t.country}`:`${t.name}, ${t.country}`,e}renderForecast(t){const e=document.querySelector(".forecast");e.innerHTML="";const n=document.createElement("div");e.appendChild(n);const o=document.createElement("h2");o.setAttribute("id","city-name"),o.textContent=t.location.name,n.appendChild(o);const i=document.createElement("h3");i.setAttribute("id","region-country"),i.textContent=t.location.region?`${t.location.region}, ${t.location.country}`:`${t.location.country}`,n.appendChild(i);const c=document.createElement("div");c.classList.add("weather-container"),e.appendChild(c);const a=document.createElement("img");a.setAttribute("id","weather-icon"),a.setAttribute("src",`https:${t.current.condition.icon}`),c.appendChild(a);const s=document.createElement("div");s.setAttribute("id","temperature"),s.innerHTML=`${t.current.temp_f} <sup>Â°F</sup>`,c.appendChild(s);const r=document.createElement("div");r.classList.add("weather-details"),c.appendChild(r);const d=document.createElement("p");d.setAttribute("id","precipitation"),d.textContent=`Precipitation: ${t.current.precip_in} in`,r.appendChild(d);const l=document.createElement("p");l.setAttribute("id","humidity"),l.textContent=`Humidity: ${t.current.humidity}%`,r.appendChild(l);const u=document.createElement("p");u.setAttribute("id","wind"),u.textContent=`Wind: ${t.current.wind_mph} mph`,r.appendChild(u);const m=document.createElement("div");m.classList.add("extra-details"),e.appendChild(m);const h=document.createElement("p");h.setAttribute("id","description"),h.textContent=t.current.condition.text,m.appendChild(h);const p=document.createElement("p");p.setAttribute("id","weekday");const y=new Date(t.location.localtime);p.textContent=this.getWeekday(y),m.appendChild(p)}getWeekday(t){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()]}}new class{constructor(){this.model=new t,this.view=new e,this.initLocationAutocomplete()}initLocationAutocomplete(){const t=document.getElementById("location-input");t.addEventListener("input",(()=>{t.value.length>0?this.model.requestLocations(t.value).then((t=>{this.model.locations=t;const e=this.view.renderLocations(t);this.initLocationResults(e)})):(this.model.locations=[],this.view.clearLocations())})),t.addEventListener("focus",(()=>{const t=this.view.renderLocations(this.model.locations);this.initLocationResults(t)})),t.addEventListener("blur",(()=>{this.view.clearLocations()}))}initLocationResults(t){const e=document.getElementById("location-input");t.forEach((t=>{t.addEventListener("mousedown",(()=>{e.value=t.textContent,this.model.requestForecast(t.textContent).then((t=>{this.view.renderForecast(t)}))}))}))}}})();